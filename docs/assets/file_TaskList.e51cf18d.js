import{_ as z,l as N,b as l,c as _,d as a,x as h,s as F,f as D,p as P,i as U,r as g,a as at,A as L,B as it,q as E,m as p,y as m,T as R,e,n as c,t as u,w as $,v as A,g as ot,C as lt,F as nt,D as rt,E as dt,G as ct}from"./file_index.260949ec.js";const B=f=>(P("data-v-1c1f9813"),f=f(),U(),f),ut={class:"modal is-active"},pt=B(()=>a("div",{class:"modal-background"},null,-1)),vt={class:"modal-content"},ft={class:"card"},mt={class:"card-content"},ht={class:"media"},kt={class:"media-left"},_t={class:"image"},yt={class:"media-content"},Dt=B(()=>a("p",{class:"title is-5"},"Delete Task",-1)),gt={class:"content has-text-grey"},bt={class:"has-text-black-bis"},Ct=B(()=>a("p",{class:"content has-text-grey"}," Are you sure? This action cannot be undone. ",-1)),Tt={class:"modal-card-foot has-background-white"},$t={__name:"ModalTaskDelete",props:{taskTitle:{type:String,required:!0}},emits:["close"],setup(f,{emit:y}){return(b,v)=>{const n=N("font-awesome-icon");return l(),_("div",ut,[pt,a("div",vt,[a("div",ft,[a("div",mt,[a("div",ht,[a("div",kt,[a("figure",_t,[h(n,{icon:"fa-solid fa-trash-can",class:"has-text-danger fa-icon-middle"})])]),a("div",yt,[Dt,a("p",gt,[F(' You are about to delete "'),a("span",bt,D(f.taskTitle),1),F('". ')]),Ct,a("div",Tt,[a("button",{class:"button is-danger",onClick:v[0]||(v[0]=t=>y("close",!0))}," Confirm "),a("button",{class:"button",onClick:v[1]||(v[1]=t=>y("close",!1))}," Cancel ")])])])])])])])}}},wt=z($t,[["__scopeId","data-v-1c1f9813"]]);const xt={class:"column is-5 pt-4 pb-4"},St=["title"],At={class:"column is-2 pt-4 pb-4"},Et=["title"],zt={class:"column is-2 pt-4 pb-4"},Bt=["title"],It={class:"actions column pt-4 pb-4 has-background-white-bis icon-pointer"},Vt={class:"column is-5 pt-4 pb-4"},qt={class:"column is-2 pt-4 pb-4"},Mt={class:"column is-2 pt-4 pb-4"},Ot={class:"actions column pt-4 pb-4 has-background-white-bis has-text-grey-light icon-not-allowed"},Ft={key:2,class:"columns ml-0 mr-0 mb-4 is-variable is-2 has-background-light"},Nt={class:"column is-3 pl-2"},Pt={class:"column is-2"},Ut={class:"select is-size-7"},Lt=["value"],Rt=["value"],Gt=["value"],jt={class:"column is-2"},Ht=["disabled"],Wt={class:"column is-2"},Yt={class:"column actions has-background-white-bis icon-pointer"},Jt={__name:"Task",props:["id"],setup(f){const y=f,b=g(!1),v=g(""),n=at(),t=n.getTask(y.id),w=g(null),x=g(null),S=g(null);let T=null;const G=" ",I="  ",i=g({title:t.title,priority:t.priority,startDate:t.startDate,dueDate:t.dueDate}),k=g({title:null,startDate:null,dueDate:null}),V=L(()=>({"is-linethrough":t.isCompleted&&!t.isArchived,"has-text-grey-light":t.isCompleted,"has-background-white-bis":t.isCompleted})),q=()=>{const o=new Date(t.startDate);let s;return t.priority===u.horizon?s=o.getDate()-o.getDay()+7:s=o.getDate()+1,new Date(o.setDate(s)).toISOString().split("T")[0]},j=()=>{let o="Postpone until ";const s=n.getFormattedDate(q()).toLowerCase();return t.priority===u.horizon?o+=`following Sunday (${s})`:o+=s,o},H=()=>{const o=new Date().toISOString().split("T")[0];let s="Advance to ";return t.priority===u.opportunity?s+="Critical":s+="Opportunity",(t.startDate<=o||t.priority===u.opportunity)&&(s+=" today"),s},M=o=>{const s={isCompleted:o,completedAt:o?Date.now():null};n.modifyTask(t,s)},W=()=>{i.value.priority===u.critical&&(i.value.startDate=new Date().toISOString().split("T")[0])},Y=()=>{let o=i.value.title.trim();for(;o.indexOf(I)>=0;)o=o.replaceAll(I,G);return i.value.title=o,k.value.title=i.value.title.length<10,k.value.title},J=()=>(k.value.startDate=!i.value.startDate||!i.value.startDate.length,k.value.startDate),K=()=>(k.value.dueDate=i.value.dueDate&&i.value.dueDate<i.value.startDate,k.value.dueDate),Q=()=>{if(Y()){w.value.focus();return}if(i.value.dueDate!=null&&!i.value.dueDate.length&&(i.value.dueDate=null),J()){x.value.focus();return}if(K()){S.value.focus();return}t.priority!==i.priority&&(i.refreshedAt=Date.now()),n.modifyTask(t,i.value),C()},X=()=>{v.value=t.title,b.value=!0},Z=async o=>{b.value=!1,v.value="",o&&await n.removeTask(t)},O=()=>{n.modifyTask(t,{isArchived:!t.isArchived})},tt=()=>{const o={startDate:new Date().toISOString().split("T")[0],refreshedAt:Date.now()};n.modifyTask(t,o),i.value.startDate=o.startDate},et=()=>{n.modifyTask(t,{startDate:q(),refreshedAt:Date.now()})},st=()=>{const o=new Date().toISOString().split("T")[0],s={priority:t.priority===u.horizon?u.opportunity:u.critical,refreshedAt:Date.now()};(t.startDate<=o||t.priority===u.opportunity)&&(s.startDate=o),n.modifyTask(t,s)},C=o=>{n.taskBeingEdited?n.taskBeingEdited=void 0:n.taskBeingEdited=t,n.taskBeingEdited?(i.value.isCompleted=t.isCompleted,i.value.title=t.title,i.value.priority=t.priority,i.value.startDate=t.startDate,i.value.dueDate=t.dueDate,T=o):T=null};return it(()=>{if(!!T){switch(T){case"inputTitle":w.value.focus();break;case"inputStartDate":x.value.focus();break;case"inputDueDate":S.value.focus();break}T=null}}),(o,s)=>{const d=N("font-awesome-icon");return l(),_("section",null,[h(R,{name:"fade"},{default:E(()=>[b.value?(l(),p(wt,{key:0,taskTitle:v.value,onClose:Z},null,8,["taskTitle"])):m("",!0)]),_:1}),e(n).taskBeingEdited?e(n).taskBeingEdited!==e(t)?(l(),_("div",{key:1,class:c(["columns ml-0 mr-0 mb-4 is-variable is-2 has-background-light",e(V)])},[a("p",Vt,D(e(t).title),1),a("p",qt,D(e(n).getFormattedDate(e(t).startDate)),1),a("p",Mt,D(e(n).getFormattedDate(e(t).dueDate)),1),a("div",Ot,[e(t).isCompleted?(l(),p(d,{key:0,icon:"fa-regular fa-square-check"})):e(t).isArchived?m("",!0):(l(),p(d,{key:1,icon:"fa-regular fa-square"})),h(d,{icon:"fa-solid fa-pen-to-square",title:"Edit",class:c({"is-hidden":e(t).isCompleted})},null,8,["class"]),e(t).isCompleted&&!e(t).isArchived?(l(),p(d,{key:2,icon:"fa-solid fa-arrow-right-to-bracket",class:"rotate-90"})):e(t).isArchived?(l(),p(d,{key:3,icon:"fa-solid fa-arrow-up-from-bracket"})):m("",!0),!e(t).isCompleted||e(t).isArchived?(l(),p(d,{key:4,icon:"fa-solid fa-trash-can"})):m("",!0),a("span",{class:c(["is-size-7-5 has-text-grey-lighter",{"is-hidden":e(t).isCompleted}])},"\u25CF",2),h(d,{icon:"fa-solid fa-rotate",title:"Refresh to today",class:c({"is-hidden":e(t).isCompleted})},null,8,["class"]),e(t).priority!==e(u).critical?(l(),p(d,{key:5,icon:"fa-solid fa-hourglass-start",class:c({"is-hidden":e(t).isCompleted})},null,8,["class"])):m("",!0),e(t).priority!==e(u).critical?(l(),p(d,{key:6,icon:"fa-solid fa-angles-up",class:c({"is-hidden":e(t).isCompleted})},null,8,["class"])):m("",!0)])],2)):(l(),_("div",Ft,[a("div",Nt,[$(a("input",{"onUpdate:modelValue":s[12]||(s[12]=r=>i.value.title=r),type:"text",id:"title",ref_key:"inputTitle",ref:w,placeholder:"What you intend to do",class:c(["input is-size-7",{"is-danger":k.value.title}])},null,2),[[A,i.value.title]])]),a("div",Pt,[a("div",Ut,[$(a("select",{"onUpdate:modelValue":s[13]||(s[13]=r=>i.value.priority=r),onChange:s[14]||(s[14]=r=>W()),id:"priority"},[a("option",{value:e(u).critical},"Critical",8,Lt),a("option",{value:e(u).opportunity,default:""}," Opportunity ",8,Rt),a("option",{value:e(u).horizon},"Horizon",8,Gt)],544),[[ot,i.value.priority]])])]),a("div",jt,[$(a("input",{"onUpdate:modelValue":s[15]||(s[15]=r=>i.value.startDate=r),type:"date",ref_key:"inputStartDate",ref:x,id:"start-date",class:c(["input is-size-7",{"is-info":i.value.priority===e(u).critical,"is-danger":k.value.startDate}]),disabled:i.value.priority===e(u).critical},null,10,Ht),[[A,i.value.startDate]])]),a("div",Wt,[$(a("input",{"onUpdate:modelValue":s[16]||(s[16]=r=>i.value.dueDate=r),type:"date",ref_key:"inputDueDate",ref:S,id:"due-date",class:c(["input is-size-7",{"is-danger":k.value.dueDate}])},null,2),[[A,i.value.dueDate]])]),a("div",Yt,[h(d,{onClick:s[17]||(s[17]=r=>Q()),icon:"fa-solid fa-circle-check",title:"Update task",class:"has-text-primary"}),h(d,{onClick:s[18]||(s[18]=r=>C()),icon:"fa-solid fa-circle-xmark",title:"Undo changes",class:"has-text-danger"})])])):(l(),_("div",{key:0,class:c(["columns ml-0 mr-0 mb-4 is-variable is-2 has-background-light",e(V)])},[a("p",xt,[a("span",{onDblclick:s[0]||(s[0]=r=>C("inputTitle")),class:c({"cursor-pointer":!e(t).isCompleted}),title:e(t).isCompleted?"":"Double-click to edit"},D(e(t).title),43,St)]),a("p",At,[a("span",{onDblclick:s[1]||(s[1]=r=>C("inputStartDate")),class:c({"cursor-pointer":!e(t).isCompleted}),title:e(t).isCompleted?"":"Double-click to edit"},D(e(n).getFormattedDate(e(t).startDate)),43,Et)]),a("p",zt,[a("span",{onDblclick:s[2]||(s[2]=r=>C("inputDueDate")),class:c({"cursor-pointer":!e(t).isCompleted,"has-text-danger":!e(t).isCompleted&&e(n).isDateDueByTomorrow(e(t).dueDate)}),title:e(t).isCompleted?"":"Double-click to edit"},D(e(n).getFormattedDate(e(t).dueDate)),43,Bt)]),a("div",It,[e(t).isCompleted&&!e(t).isArchived?(l(),p(d,{key:0,onClick:s[3]||(s[3]=r=>M(!1)),icon:"fa-regular fa-square-check",title:"Mark as pending",class:"has-text-primary"})):e(t).isArchived?m("",!0):(l(),p(d,{key:1,onClick:s[4]||(s[4]=r=>M(!0)),icon:"fa-regular fa-square",title:"Mark as completed",class:"has-text-primary"})),h(d,{onClick:s[5]||(s[5]=r=>C()),icon:"fa-solid fa-pen-to-square",title:"Edit",class:c(["has-text-info",{"is-hidden":e(t).isCompleted}])},null,8,["class"]),e(t).isCompleted&&!e(t).isArchived?(l(),p(d,{key:2,onClick:s[6]||(s[6]=r=>O()),icon:"fa-solid fa-arrow-right-to-bracket",title:"Archive",class:"rotate-90 has-text-info"})):e(t).isArchived?(l(),p(d,{key:3,onClick:s[7]||(s[7]=r=>O()),icon:"fa-solid fa-arrow-up-from-bracket",title:"Restore",class:"has-text-info"})):m("",!0),!e(t).isCompleted||e(t).isArchived?(l(),p(d,{key:4,onClick:s[8]||(s[8]=r=>X()),icon:"fa-solid fa-trash-can",title:"Delete",class:"has-text-danger"})):m("",!0),a("span",{class:c(["is-size-7-5 has-text-grey-lighter",{"is-hidden":e(t).isCompleted}])},"\u25CF",2),h(d,{onClick:s[9]||(s[9]=r=>tt()),icon:"fa-solid fa-rotate",title:"Refresh to today",class:c(["'cursor-pointer'",{"is-hidden":e(t).isCompleted}])},null,8,["class"]),e(t).priority!==e(u).critical?(l(),p(d,{key:5,onClick:s[10]||(s[10]=r=>et()),icon:"fa-solid fa-hourglass-start",title:j(),class:c(["'cursor-pointer'",{"is-hidden":e(t).isCompleted}])},null,8,["title","class"])):m("",!0),e(t).priority!==e(u).critical?(l(),p(d,{key:6,onClick:s[11]||(s[11]=r=>st()),icon:"fa-solid fa-angles-up",title:H(),class:c(["'cursor-pointer'",{"is-hidden":e(t).isCompleted}])},null,8,["title","class"])):m("",!0)])],2))])}}},Kt=z(Jt,[["__scopeId","data-v-1a900668"]]);const Qt=f=>(P("data-v-25eaa3b7"),f=f(),U(),f),Xt={class:"is-flex is-justify-content-space-between is-align-items-center"},Zt={class:"title is-5 tasklist-title"},te={key:0},ee=ct('<div class="columns ml-0 mr-0 is-variable is-2 is-size-7-5 is-uppercase has-text-weight-semibold has-text-grey" data-v-25eaa3b7><p class="column is-5 pt-2" data-v-25eaa3b7>Task</p><p class="column is-2 pt-2" data-v-25eaa3b7>Start date</p><p class="column is-2 pt-2" data-v-25eaa3b7>Due date</p><p class="column pt-2" data-v-25eaa3b7>Actions</p></div>',1),se={key:1,class:"empty"},ae=Qt(()=>a("p",{class:"has-text-grey-light is-size-6"}," Nothing to work with on this front ",-1)),ie={__name:"TaskList",props:["tasks"],setup(f){const y=f,b=L(()=>{const v=y.tasks.length;return v?v===1?"1 task":`${v} tasks`:"No tasks"});return(v,n)=>(l(),_("section",null,[a("header",Xt,[a("h3",Zt,[lt(v.$slots,"default",{},void 0,!0)]),a("p",null,D(e(b)),1)]),y.tasks.length?(l(),_("div",te,[ee,h(dt,{name:"list",appear:""},{default:E(()=>[(l(!0),_(nt,null,rt(y.tasks,t=>(l(),p(Kt,{id:t.id,key:t.id},null,8,["id"]))),128))]),_:1})])):(l(),_("div",se,[h(R,{name:"list",appear:""},{default:E(()=>[ae]),_:1})]))]))}},le=z(ie,[["__scopeId","data-v-25eaa3b7"]]);export{le as T};
