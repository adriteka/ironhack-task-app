import{_ as V,a as N,r as b,y as B,z as O,j as R,b as o,c as f,e,n as c,d as i,k,l as u,s as m,q as y,t as p,w as C,v as w,f as M,A as j,F as H,B as W,C as G,D as J,E as K}from"./file_index.c2aba5fc.js";const Q={class:"column is-5 pt-4 pb-4"},X=["title"],Y={class:"column is-2 pt-4 pb-4"},Z=["title"],tt={class:"column is-2 pt-4 pb-4"},et=["title"],st={class:"actions column pt-4 pb-4 has-background-white-bis icon-pointer"},it={class:"column is-5 pt-4 pb-4"},at={class:"column is-2 pt-4 pb-4"},ot={class:"column is-2 pt-4 pb-4"},lt={class:"actions column pt-4 pb-4 has-background-white-bis has-text-grey-light icon-not-allowed"},nt={key:2,class:"columns ml-0 mr-0 mb-4 is-variable is-2 has-background-light"},rt={class:"column is-3 pl-2"},dt={class:"column is-2"},ct={class:"select is-size-7"},pt=["value"],ut=["value"],mt=["value"],ft={class:"column is-2"},ht={class:"column is-2"},kt={class:"column actions has-background-white-bis icon-pointer"},vt={__name:"Task",props:["id"],setup(h){const g=h,l=N(),t=l.getTask(g.id),T=b(null),D=b(null),$=b(null);let _=null;const d=b({isCompleted:t.isCompleted,title:t.title,priority:t.priority,startDate:t.startDate,dueDate:t.dueDate}),x=B(()=>({"is-linethrough":t.isCompleted&&!t.isArchived,"has-text-grey-light":t.isCompleted,"has-background-white-bis":t.isCompleted})),A=()=>{const a=new Date(t.startDate);let s;return t.priority===p.horizon?s=a.getDate()-a.getDay()+7:s=a.getDate()+1,new Date(a.setDate(s)).toISOString().split("T")[0]},E=()=>{let a="Postpone until ";const s=l.getFormattedDate(A()).toLowerCase();return t.priority===p.horizon?a+=`following Sunday (${s})`:a+=s,a},I=()=>{const a=new Date().toISOString().split("T")[0];let s="Advance to ";return t.priority===p.opportunity?s+="Critical":s+="Opportunity",(t.startDate<=a||t.priority===p.opportunity)&&(s+=" today"),s},S=a=>{const s={isCompleted:a,completedAt:a?Date.now():null};l.modifyTask(t,s)},q=()=>{d.value.dueDate||(d.value.dueDate=null),t.priority!==d.priority&&(d.refreshedAt=Date.now()),l.modifyTask(t,d.value),v()},F=()=>{console.log("handleDelete",t);const a=35,s=t.title.length>a?`${t.title.slice(0,a)}\u2026`:t.title;confirm(`Delete '${s}' for sure?`)&&l.removeTask(t)},z=()=>{l.modifyTask(t,{isArchived:!t.isArchived})},P=()=>{const a={startDate:new Date().toISOString().split("T")[0],refreshedAt:Date.now()};console.log("handleRefresh",a.refreshedAt),l.modifyTask(t,a),d.value.startDate=a.startDate},U=()=>{l.modifyTask(t,{startDate:A(),refreshedAt:Date.now()})},L=()=>{const a=new Date().toISOString().split("T")[0],s={priority:t.priority===p.horizon?p.opportunity:p.critical,refreshedAt:Date.now()};(t.startDate<=a||t.priority===p.opportunity)&&(s.startDate=a),l.modifyTask(t,s)},v=a=>{l.taskBeingEdited?l.taskBeingEdited=void 0:l.taskBeingEdited=t,l.taskBeingEdited?(d.value.isCompleted=t.isCompleted,d.value.title=t.title,d.value.priority=t.priority,d.value.startDate=t.startDate,d.value.dueDate=t.dueDate,_=a):_=null};return O(()=>{if(!!_){switch(_){case"inputTitle":T.value.focus();break;case"inputStartDate":D.value.focus();break;case"inputDueDate":$.value.focus();break}_=null}}),(a,s)=>{const n=R("font-awesome-icon");return o(),f("section",null,[e(l).taskBeingEdited?e(l).taskBeingEdited!==e(t)?(o(),f("div",{key:1,class:c(["columns ml-0 mr-0 mb-4 is-variable is-2 has-background-light",e(x)])},[i("p",it,k(e(t).title),1),i("p",at,k(e(l).getFormattedDate(e(t).startDate)),1),i("p",ot,k(e(l).getFormattedDate(e(t).dueDate)),1),i("div",lt,[e(t).isCompleted?(o(),u(n,{key:0,icon:"fa-regular fa-square-check"})):e(t).isArchived?m("",!0):(o(),u(n,{key:1,icon:"fa-regular fa-square"})),y(n,{icon:"fa-solid fa-pen-to-square",title:"Edit",class:c({"is-hidden":e(t).isCompleted})},null,8,["class"]),e(t).isCompleted&&!e(t).isArchived?(o(),u(n,{key:2,icon:"fa-solid fa-arrow-right-to-bracket",class:"rotate-90"})):e(t).isArchived?(o(),u(n,{key:3,icon:"fa-solid fa-arrow-up-from-bracket"})):m("",!0),!e(t).isCompleted||e(t).isArchived?(o(),u(n,{key:4,icon:"fa-solid fa-trash-can"})):m("",!0),i("span",{class:c(["is-size-7-5 has-text-grey-lighter",{"is-hidden":e(t).isCompleted}])},"\u25CF",2),y(n,{icon:"fa-solid fa-rotate",title:"Refresh to today",class:c({"is-hidden":e(t).isCompleted})},null,8,["class"]),e(t).priority!==e(p).critical?(o(),u(n,{key:5,icon:"fa-solid fa-hourglass-start",class:c({"is-hidden":e(t).isCompleted})},null,8,["class"])):m("",!0),e(t).priority!==e(p).critical?(o(),u(n,{key:6,icon:"fa-solid fa-angles-up",class:c({"is-hidden":e(t).isCompleted})},null,8,["class"])):m("",!0)])],2)):(o(),f("div",nt,[i("div",rt,[C(i("input",{"onUpdate:modelValue":s[12]||(s[12]=r=>d.value.title=r),type:"text",id:"title",ref_key:"inputTitle",ref:T,placeholder:"What you intend to do",class:"input is-size-7"},null,512),[[w,d.value.title]])]),i("div",dt,[i("div",ct,[C(i("select",{"onUpdate:modelValue":s[13]||(s[13]=r=>d.value.priority=r),id:"priority"},[i("option",{value:e(p).critical},"Critical",8,pt),i("option",{value:e(p).opportunity,default:""}," Opportunity ",8,ut),i("option",{value:e(p).horizon},"Horizon",8,mt)],512),[[M,d.value.priority]])])]),i("div",ft,[C(i("input",{"onUpdate:modelValue":s[14]||(s[14]=r=>d.value.startDate=r),type:"date",ref_key:"inputStartDate",ref:D,id:"start-date",class:"input is-size-7"},null,512),[[w,d.value.startDate]])]),i("div",ht,[C(i("input",{"onUpdate:modelValue":s[15]||(s[15]=r=>d.value.dueDate=r),type:"date",ref_key:"inputDueDate",ref:$,id:"due-date",class:"input is-size-7"},null,512),[[w,d.value.dueDate]])]),i("div",kt,[y(n,{onClick:s[16]||(s[16]=r=>q()),icon:"fa-solid fa-circle-check",title:"Update task",class:"has-text-primary"}),y(n,{onClick:s[17]||(s[17]=r=>v()),icon:"fa-solid fa-circle-xmark",title:"Undo changes",class:"has-text-danger"})])])):(o(),f("div",{key:0,class:c(["columns ml-0 mr-0 mb-4 is-variable is-2 has-background-light",e(x)])},[i("p",Q,[i("span",{onDblclick:s[0]||(s[0]=r=>v("inputTitle")),class:c({"cursor-pointer":!e(t).isCompleted}),title:e(t).isCompleted?"":"Double-click to edit"},k(e(t).title),43,X)]),i("p",Y,[i("span",{onDblclick:s[1]||(s[1]=r=>v("inputStartDate")),class:c({"cursor-pointer":!e(t).isCompleted}),title:e(t).isCompleted?"":"Double-click to edit"},k(e(l).getFormattedDate(e(t).startDate)),43,Z)]),i("p",tt,[i("span",{onDblclick:s[2]||(s[2]=r=>v("inputDueDate")),class:c({"cursor-pointer":!e(t).isCompleted}),title:e(t).isCompleted?"":"Double-click to edit"},k(e(l).getFormattedDate(e(t).dueDate)),43,et)]),i("div",st,[e(t).isCompleted&&!e(t).isArchived?(o(),u(n,{key:0,onClick:s[3]||(s[3]=r=>S(!1)),icon:"fa-regular fa-square-check",title:"Mark as pending",class:"has-text-primary"})):e(t).isArchived?m("",!0):(o(),u(n,{key:1,onClick:s[4]||(s[4]=r=>S(!0)),icon:"fa-regular fa-square",title:"Mark as completed",class:"has-text-primary"})),y(n,{onClick:s[5]||(s[5]=r=>v()),icon:"fa-solid fa-pen-to-square",title:"Edit",class:c(["has-text-info",{"is-hidden":e(t).isCompleted}])},null,8,["class"]),e(t).isCompleted&&!e(t).isArchived?(o(),u(n,{key:2,onClick:s[6]||(s[6]=r=>z()),icon:"fa-solid fa-arrow-right-to-bracket",title:"Archive",class:"rotate-90 has-text-info"})):e(t).isArchived?(o(),u(n,{key:3,onClick:s[7]||(s[7]=r=>z()),icon:"fa-solid fa-arrow-up-from-bracket",title:"Restore",class:"has-text-info"})):m("",!0),!e(t).isCompleted||e(t).isArchived?(o(),u(n,{key:4,onClick:s[8]||(s[8]=r=>F()),icon:"fa-solid fa-trash-can",title:"Delete",class:"has-text-danger"})):m("",!0),i("span",{class:c(["is-size-7-5 has-text-grey-lighter",{"is-hidden":e(t).isCompleted}])},"\u25CF",2),y(n,{onClick:s[9]||(s[9]=r=>P()),icon:"fa-solid fa-rotate",title:"Refresh to today",class:c(["'cursor-pointer'",{"is-hidden":e(t).isCompleted}])},null,8,["class"]),e(t).priority!==e(p).critical?(o(),u(n,{key:5,onClick:s[10]||(s[10]=r=>U()),icon:"fa-solid fa-hourglass-start",title:E(),class:c(["'cursor-pointer'",{"is-hidden":e(t).isCompleted}])},null,8,["title","class"])):m("",!0),e(t).priority!==e(p).critical?(o(),u(n,{key:6,onClick:s[11]||(s[11]=r=>L()),icon:"fa-solid fa-angles-up",title:I(),class:c(["'cursor-pointer'",{"is-hidden":e(t).isCompleted}])},null,8,["title","class"])):m("",!0)])],2))])}}},yt=V(vt,[["__scopeId","data-v-d16da9a6"]]);const gt=h=>(J("data-v-5b9dad24"),h=h(),K(),h),Dt={class:"is-flex is-justify-content-space-between is-align-items-center"},_t={class:"title is-5 tasklist-title"},bt={key:0},Ct=G('<div class="columns ml-0 mr-0 is-variable is-2 is-size-7-5 is-uppercase has-text-weight-semibold has-text-grey" data-v-5b9dad24><p class="column is-5 pt-2" data-v-5b9dad24>Task</p><p class="column is-2 pt-2" data-v-5b9dad24>Start date</p><p class="column is-2 pt-2" data-v-5b9dad24>Due date</p><p class="column pt-2" data-v-5b9dad24>Actions</p></div>',1),Tt={key:1,class:"empty"},wt=gt(()=>i("p",{class:"has-text-grey-light is-size-6"},"Nothing to work with on this front",-1)),$t=[wt],xt={__name:"TaskList",props:["tasks"],setup(h){const g=h,l=B(()=>{const t=g.tasks.length;return t?t===1?"1 task":`${t} tasks`:"No tasks"});return(t,T)=>(o(),f("section",null,[i("header",Dt,[i("h3",_t,[j(t.$slots,"default",{},void 0,!0)]),i("p",null,k(e(l)),1)]),g.tasks.length?(o(),f("div",bt,[Ct,(o(!0),f(H,null,W(g.tasks,D=>(o(),u(yt,{id:D.id,key:D.id},null,8,["id"]))),128))])):(o(),f("div",Tt,$t))]))}},St=V(xt,[["__scopeId","data-v-5b9dad24"]]);export{St as T};
