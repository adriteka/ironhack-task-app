import{_ as E,l as F,b as l,c as k,d as i,x as C,s as q,f as D,p as N,i as O,r as b,a as X,A as P,B as Z,m as p,y as h,e,n as c,t as u,w as S,v as A,g as tt,C as et,F as st,D as it,E as at}from"./file_index.2db8f75e.js";const z=v=>(N("data-v-86723752"),v=v(),O(),v),ot={class:"modal is-active"},lt=z(()=>i("div",{class:"modal-background"},null,-1)),nt={class:"modal-content"},rt={class:"card"},dt={class:"card-content"},ct={class:"media"},ut={class:"media-left"},pt={class:"image"},vt={class:"media-content"},ft=z(()=>i("p",{class:"title is-5"},"Delete Task",-1)),ht={class:"content has-text-grey"},mt={class:"has-text-black-bis"},kt=z(()=>i("p",{class:"content has-text-grey"},"Are you sure? This action cannot be undone.",-1)),_t={class:"modal-card-foot has-background-white"},yt=["v-show"],Dt={__name:"ModalTaskDelete",props:{taskTitle:{type:String,required:!0}},emits:["close"],setup(v,{emit:_}){const g=v,f=()=>{_("close",!0)},n=()=>{_("close",!1)};return console.log("Modal - script setup"),(t,y)=>{const T=F("font-awesome-icon");return l(),k("div",ot,[lt,i("div",nt,[i("div",rt,[i("div",dt,[i("div",ct,[i("div",ut,[i("figure",pt,[C(T,{icon:"fa-solid fa-trash-can",class:"has-text-danger fa-icon-middle"})])]),i("div",vt,[ft,i("p",ht,[q(' You are about to the delete the "'),i("span",mt,D(v.taskTitle),1),q('" task. ')]),kt,i("div",_t,[i("button",{"v-show":g.code==3,class:"button is-danger",onClick:y[0]||(y[0]=w=>f())}," Confirm ",8,yt),i("button",{class:"button",onClick:y[1]||(y[1]=w=>n())},"Cancel")])])])])])])])}}},gt=E(Dt,[["__scopeId","data-v-86723752"]]);const bt={class:"column is-5 pt-4 pb-4"},Ct=["title"],$t={class:"column is-2 pt-4 pb-4"},Tt=["title"],wt={class:"column is-2 pt-4 pb-4"},xt=["title"],St={class:"actions column pt-4 pb-4 has-background-white-bis icon-pointer"},At={class:"column is-5 pt-4 pb-4"},Et={class:"column is-2 pt-4 pb-4"},zt={class:"column is-2 pt-4 pb-4"},Vt={class:"actions column pt-4 pb-4 has-background-white-bis has-text-grey-light icon-not-allowed"},It={key:3,class:"columns ml-0 mr-0 mb-4 is-variable is-2 has-background-light"},Bt={class:"column is-3 pl-2"},Mt={class:"column is-2"},qt={class:"select is-size-7"},Ft=["value"],Nt=["value"],Ot=["value"],Pt={class:"column is-2"},Ut=["disabled"],Rt={class:"column is-2"},Lt={class:"column actions has-background-white-bis icon-pointer"},jt={__name:"Task",props:["id"],setup(v){const _=v,g=b(!1),f=b(""),n=X(),t=n.getTask(_.id),y=b(null),T=b(null),w=b(null);let x=null;const a=b({title:t.title,priority:t.priority,startDate:t.startDate,dueDate:t.dueDate}),m=b({title:null,startDate:null,dueDate:null}),V=P(()=>({"is-linethrough":t.isCompleted&&!t.isArchived,"has-text-grey-light":t.isCompleted,"has-background-white-bis":t.isCompleted})),I=()=>{const o=new Date(t.startDate);let s;return t.priority===u.horizon?s=o.getDate()-o.getDay()+7:s=o.getDate()+1,new Date(o.setDate(s)).toISOString().split("T")[0]},U=()=>{let o="Postpone until ";const s=n.getFormattedDate(I()).toLowerCase();return t.priority===u.horizon?o+=`following Sunday (${s})`:o+=s,o},R=()=>{const o=new Date().toISOString().split("T")[0];let s="Advance to ";return t.priority===u.opportunity?s+="Critical":s+="Opportunity",(t.startDate<=o||t.priority===u.opportunity)&&(s+=" today"),s},B=o=>{const s={isCompleted:o,completedAt:o?Date.now():null};n.modifyTask(t,s)},L=()=>(m.value.title=a.value.title.length<10,m.value.title),j=()=>(m.value.startDate=!a.value.startDate||!a.value.startDate.length,m.value.startDate),H=()=>(m.value.dueDate=a.value.dueDate&&a.value.dueDate<a.value.startDate,m.value.dueDate),W=()=>{if(L()){y.value.focus();return}if(a.value.dueDate!=null&&!a.value.dueDate.length&&(a.value.dueDate=null),j()){T.value.focus();return}if(H()){w.value.focus();return}t.priority!==a.priority&&(a.refreshedAt=Date.now()),n.modifyTask(t,a.value),$()},Y=async o=>{console.log("closeModal",o),g.value=!1,f.value="",o&&await n.removeTask(t)},G=()=>{f.value=t.title,g.value=!0},M=()=>{n.modifyTask(t,{isArchived:!t.isArchived})},J=()=>{const o={startDate:new Date().toISOString().split("T")[0],refreshedAt:Date.now()};console.log("handleRefresh",o.refreshedAt),n.modifyTask(t,o),a.value.startDate=o.startDate},K=()=>{n.modifyTask(t,{startDate:I(),refreshedAt:Date.now()})},Q=()=>{const o=new Date().toISOString().split("T")[0],s={priority:t.priority===u.horizon?u.opportunity:u.critical,refreshedAt:Date.now()};(t.startDate<=o||t.priority===u.opportunity)&&(s.startDate=o),n.modifyTask(t,s)},$=o=>{n.taskBeingEdited?n.taskBeingEdited=void 0:n.taskBeingEdited=t,n.taskBeingEdited?(a.value.isCompleted=t.isCompleted,a.value.title=t.title,a.value.priority=t.priority,a.value.startDate=t.startDate,a.value.dueDate=t.dueDate,x=o):x=null};return Z(()=>{if(!!x){switch(x){case"inputTitle":y.value.focus();break;case"inputStartDate":T.value.focus();break;case"inputDueDate":w.value.focus();break}x=null}}),(o,s)=>{const d=F("font-awesome-icon");return l(),k("section",null,[g.value?(l(),p(gt,{key:0,taskTitle:f.value,onClose:Y},null,8,["taskTitle"])):h("",!0),e(n).taskBeingEdited?e(n).taskBeingEdited!==e(t)?(l(),k("div",{key:2,class:c(["columns ml-0 mr-0 mb-4 is-variable is-2 has-background-light",e(V)])},[i("p",At,D(e(t).title),1),i("p",Et,D(e(n).getFormattedDate(e(t).startDate)),1),i("p",zt,D(e(n).getFormattedDate(e(t).dueDate)),1),i("div",Vt,[e(t).isCompleted?(l(),p(d,{key:0,icon:"fa-regular fa-square-check"})):e(t).isArchived?h("",!0):(l(),p(d,{key:1,icon:"fa-regular fa-square"})),C(d,{icon:"fa-solid fa-pen-to-square",title:"Edit",class:c({"is-hidden":e(t).isCompleted})},null,8,["class"]),e(t).isCompleted&&!e(t).isArchived?(l(),p(d,{key:2,icon:"fa-solid fa-arrow-right-to-bracket",class:"rotate-90"})):e(t).isArchived?(l(),p(d,{key:3,icon:"fa-solid fa-arrow-up-from-bracket"})):h("",!0),!e(t).isCompleted||e(t).isArchived?(l(),p(d,{key:4,icon:"fa-solid fa-trash-can"})):h("",!0),i("span",{class:c(["is-size-7-5 has-text-grey-lighter",{"is-hidden":e(t).isCompleted}])},"\u25CF",2),C(d,{icon:"fa-solid fa-rotate",title:"Refresh to today",class:c({"is-hidden":e(t).isCompleted})},null,8,["class"]),e(t).priority!==e(u).critical?(l(),p(d,{key:5,icon:"fa-solid fa-hourglass-start",class:c({"is-hidden":e(t).isCompleted})},null,8,["class"])):h("",!0),e(t).priority!==e(u).critical?(l(),p(d,{key:6,icon:"fa-solid fa-angles-up",class:c({"is-hidden":e(t).isCompleted})},null,8,["class"])):h("",!0)])],2)):(l(),k("div",It,[i("div",Bt,[S(i("input",{"onUpdate:modelValue":s[12]||(s[12]=r=>a.value.title=r),type:"text",id:"title",ref_key:"inputTitle",ref:y,placeholder:"What you intend to do",class:c(["input is-size-7",{"is-danger":m.value.title}])},null,2),[[A,a.value.title]])]),i("div",Mt,[i("div",qt,[S(i("select",{"onUpdate:modelValue":s[13]||(s[13]=r=>a.value.priority=r),id:"priority"},[i("option",{value:e(u).critical},"Critical",8,Ft),i("option",{value:e(u).opportunity,default:""}," Opportunity ",8,Nt),i("option",{value:e(u).horizon},"Horizon",8,Ot)],512),[[tt,a.value.priority]])])]),i("div",Pt,[S(i("input",{"onUpdate:modelValue":s[14]||(s[14]=r=>a.value.startDate=r),type:"date",ref_key:"inputStartDate",ref:T,id:"start-date",class:c(["input is-size-7",{"is-info":a.value.priority===e(u).critical,"is-danger":m.value.startDate}]),disabled:a.value.priority===e(u).critical},null,10,Ut),[[A,a.value.startDate]])]),i("div",Rt,[S(i("input",{"onUpdate:modelValue":s[15]||(s[15]=r=>a.value.dueDate=r),type:"date",ref_key:"inputDueDate",ref:w,id:"due-date",class:c(["input is-size-7",{"is-danger":m.value.dueDate}])},null,2),[[A,a.value.dueDate]])]),i("div",Lt,[C(d,{onClick:s[16]||(s[16]=r=>W()),icon:"fa-solid fa-circle-check",title:"Update task",class:"has-text-primary"}),C(d,{onClick:s[17]||(s[17]=r=>$()),icon:"fa-solid fa-circle-xmark",title:"Undo changes",class:"has-text-danger"})])])):(l(),k("div",{key:1,class:c(["columns ml-0 mr-0 mb-4 is-variable is-2 has-background-light",e(V)])},[i("p",bt,[i("span",{onDblclick:s[0]||(s[0]=r=>$("inputTitle")),class:c({"cursor-pointer":!e(t).isCompleted}),title:e(t).isCompleted?"":"Double-click to edit"},D(e(t).title),43,Ct)]),i("p",$t,[i("span",{onDblclick:s[1]||(s[1]=r=>$("inputStartDate")),class:c({"cursor-pointer":!e(t).isCompleted}),title:e(t).isCompleted?"":"Double-click to edit"},D(e(n).getFormattedDate(e(t).startDate)),43,Tt)]),i("p",wt,[i("span",{onDblclick:s[2]||(s[2]=r=>$("inputDueDate")),class:c({"cursor-pointer":!e(t).isCompleted}),title:e(t).isCompleted?"":"Double-click to edit"},D(e(n).getFormattedDate(e(t).dueDate)),43,xt)]),i("div",St,[e(t).isCompleted&&!e(t).isArchived?(l(),p(d,{key:0,onClick:s[3]||(s[3]=r=>B(!1)),icon:"fa-regular fa-square-check",title:"Mark as pending",class:"has-text-primary"})):e(t).isArchived?h("",!0):(l(),p(d,{key:1,onClick:s[4]||(s[4]=r=>B(!0)),icon:"fa-regular fa-square",title:"Mark as completed",class:"has-text-primary"})),C(d,{onClick:s[5]||(s[5]=r=>$()),icon:"fa-solid fa-pen-to-square",title:"Edit",class:c(["has-text-info",{"is-hidden":e(t).isCompleted}])},null,8,["class"]),e(t).isCompleted&&!e(t).isArchived?(l(),p(d,{key:2,onClick:s[6]||(s[6]=r=>M()),icon:"fa-solid fa-arrow-right-to-bracket",title:"Archive",class:"rotate-90 has-text-info"})):e(t).isArchived?(l(),p(d,{key:3,onClick:s[7]||(s[7]=r=>M()),icon:"fa-solid fa-arrow-up-from-bracket",title:"Restore",class:"has-text-info"})):h("",!0),!e(t).isCompleted||e(t).isArchived?(l(),p(d,{key:4,onClick:s[8]||(s[8]=r=>G()),icon:"fa-solid fa-trash-can",title:"Delete",class:"has-text-danger"})):h("",!0),i("span",{class:c(["is-size-7-5 has-text-grey-lighter",{"is-hidden":e(t).isCompleted}])},"\u25CF",2),C(d,{onClick:s[9]||(s[9]=r=>J()),icon:"fa-solid fa-rotate",title:"Refresh to today",class:c(["'cursor-pointer'",{"is-hidden":e(t).isCompleted}])},null,8,["class"]),e(t).priority!==e(u).critical?(l(),p(d,{key:5,onClick:s[10]||(s[10]=r=>K()),icon:"fa-solid fa-hourglass-start",title:U(),class:c(["'cursor-pointer'",{"is-hidden":e(t).isCompleted}])},null,8,["title","class"])):h("",!0),e(t).priority!==e(u).critical?(l(),p(d,{key:6,onClick:s[11]||(s[11]=r=>Q()),icon:"fa-solid fa-angles-up",title:R(),class:c(["'cursor-pointer'",{"is-hidden":e(t).isCompleted}])},null,8,["title","class"])):h("",!0)])],2))])}}},Ht=E(jt,[["__scopeId","data-v-75f18ff8"]]);const Wt=v=>(N("data-v-5b9dad24"),v=v(),O(),v),Yt={class:"is-flex is-justify-content-space-between is-align-items-center"},Gt={class:"title is-5 tasklist-title"},Jt={key:0},Kt=at('<div class="columns ml-0 mr-0 is-variable is-2 is-size-7-5 is-uppercase has-text-weight-semibold has-text-grey" data-v-5b9dad24><p class="column is-5 pt-2" data-v-5b9dad24>Task</p><p class="column is-2 pt-2" data-v-5b9dad24>Start date</p><p class="column is-2 pt-2" data-v-5b9dad24>Due date</p><p class="column pt-2" data-v-5b9dad24>Actions</p></div>',1),Qt={key:1,class:"empty"},Xt=Wt(()=>i("p",{class:"has-text-grey-light is-size-6"},"Nothing to work with on this front",-1)),Zt=[Xt],te={__name:"TaskList",props:["tasks"],setup(v){const _=v,g=P(()=>{const f=_.tasks.length;return f?f===1?"1 task":`${f} tasks`:"No tasks"});return(f,n)=>(l(),k("section",null,[i("header",Yt,[i("h3",Gt,[et(f.$slots,"default",{},void 0,!0)]),i("p",null,D(e(g)),1)]),_.tasks.length?(l(),k("div",Jt,[Kt,(l(!0),k(st,null,it(_.tasks,t=>(l(),p(Ht,{id:t.id,key:t.id},null,8,["id"]))),128))])):(l(),k("div",Qt,Zt))]))}},se=E(te,[["__scopeId","data-v-5b9dad24"]]);export{se as T};
