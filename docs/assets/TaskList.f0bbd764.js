import{q as A,r as h,s as P,o as O,t as N,h as R,a as p,c as g,n as d,u as s,b as o,x as C,y as m,i as D,l as b,w as _,v as x,d as H,z as j,F as W,A as G,B as J}from"./index.d2713152.js";import{a as K,t as n}from"./tasks.00301769.js";const Q={class:"column is-5 pt-4 pb-4"},X=["title"],Y={class:"column is-2 pt-4 pb-4"},Z=["title"],tt={class:"column is-2 pt-4 pb-4"},et=["title"],st={class:"actions column pt-4 pb-4 has-background-white-bis"},it={key:1,class:"columns ml-0 mr-0 mb-4 is-variable is-2 has-background-light"},ot={class:"column is-3 pl-2"},at={class:"column is-2"},lt={class:"select is-size-7"},nt=["value"],rt=["value"],dt=["value"],pt={class:"column is-2"},ut={class:"column is-2"},ct={class:"column actions has-background-white-bis"},mt={__name:"Task",props:["id"],setup(T){const f=T,r=K(),t=r.getTask(f.id),v=h(!1),k=h(null),$=h(null),w=h(null);let y=null;const l=h({isCompleted:t.isCompleted,title:t.title,priority:t.priority,startDate:t.startDate,dueDate:t.dueDate}),U=P(()=>({"is-linethrough":t.isCompleted,"has-text-grey-light":t.isCompleted,"has-background-white-bis":t.isCompleted})),z=()=>{const i=new Date(t.startDate);let e;return t.priority===n.horizon?e=i.getDate()-i.getDay()+7:e=i.getDate()+1,new Date(i.setDate(e)).toISOString().split("T")[0]},q=()=>{let i="Postpone to ";const e=r.getFormattedDate(z()).toLowerCase();return t.priority===n.horizon?i+=`following Sunday (${e})`:i+=e,i},B=()=>{let i="Advance to ";return t.priority===n.opportunity?i+="Critical":i+="Opportunity",i},I=()=>{let i="Push down to ";return t.priority===n.opportunity?i+="Horizon":i+="Opportunity",i},S=i=>{const e={isCompleted:i,completedAt:i?Date.now():null};r.modifyTask(t,e)},E=()=>{l.value.dueDate||(l.value.dueDate=null),t.priority!==l.priority&&(l.refreshedAt=Date.now()),r.modifyTask(t,l.value),c()},F=()=>{console.log("handleDelete",t),confirm(`Delete '${t.title.slice(0,15)}' for sure?`)&&r.removeTask(t)},L=()=>{const i={startDate:new Date().toISOString().split("T")[0],refreshedAt:Date.now()};console.log("handleRefresh",i.refreshedAt),r.modifyTask(t,i),l.value.startDate=i.startDate},M=()=>{r.modifyTask(t,{startDate:z(),refreshedAt:Date.now()})},V=i=>{const e={priority:i,refreshedAt:Date.now()};r.modifyTask(t,e)},c=i=>{v.value=!v.value,v.value?(l.value.isCompleted=t.isCompleted,l.value.title=t.title,l.value.priority=t.priority,l.value.startDate=t.startDate,l.value.dueDate=t.dueDate,y=i):y=null};return O(()=>{document.getElementById("checkbox-done")}),N(()=>{if(!!y){switch(y){case"inputTitle":k.value.focus();break;case"inputStartDate":$.value.focus();break;case"inputDueDate":w.value.focus();break}y=null}}),(i,e)=>{const u=R("font-awesome-icon");return p(),g("section",null,[v.value?(p(),g("div",it,[o("div",ot,[_(o("input",{"onUpdate:modelValue":e[11]||(e[11]=a=>l.value.title=a),type:"text",id:"title",ref_key:"inputTitle",ref:k,placeholder:"What you intend to do",class:"input is-size-7"},null,512),[[x,l.value.title]])]),o("div",at,[o("div",lt,[_(o("select",{"onUpdate:modelValue":e[12]||(e[12]=a=>l.value.priority=a),id:"priority"},[o("option",{value:s(n).critical},"Critical",8,nt),o("option",{value:s(n).opportunity,default:""}," Opportunity ",8,rt),o("option",{value:s(n).horizon},"Horizon",8,dt)],512),[[H,l.value.priority]])])]),o("div",pt,[_(o("input",{"onUpdate:modelValue":e[13]||(e[13]=a=>l.value.startDate=a),type:"date",ref_key:"inputStartDate",ref:$,id:"start-date",class:"input is-size-7"},null,512),[[x,l.value.startDate]])]),o("div",ut,[_(o("input",{"onUpdate:modelValue":e[14]||(e[14]=a=>l.value.dueDate=a),type:"date",ref_key:"inputDueDate",ref:w,id:"due-date",class:"input is-size-7"},null,512),[[x,l.value.dueDate]])]),o("div",ct,[D(u,{onClick:e[15]||(e[15]=a=>E()),icon:"fa-solid fa-circle-check",title:"Update task",class:"pointer has-text-primary"}),D(u,{onClick:e[16]||(e[16]=a=>c()),icon:"fa-solid fa-circle-xmark",title:"Undo changes",class:"pointer has-text-danger"})])])):(p(),g("div",{key:0,class:d(["columns ml-0 mr-0 mb-4 is-variable is-2 has-background-light",s(U)])},[o("p",Q,[o("span",{onDblclick:e[0]||(e[0]=a=>c("inputTitle")),class:d({pointer:!s(t).isCompleted}),title:s(t).isCompleted?"":"Double-click to edit"},C(s(t).title),43,X)]),o("p",Y,[o("span",{onDblclick:e[1]||(e[1]=a=>c("inputStartDate")),class:d({pointer:!s(t).isCompleted}),title:s(t).isCompleted?"":"Double-click to edit"},C(s(r).getFormattedDate(s(t).startDate)),43,Z)]),o("p",tt,[o("span",{onDblclick:e[2]||(e[2]=a=>c("inputDueDate")),class:d({pointer:!s(t).isCompleted}),title:s(t).isCompleted?"":"Double-click to edit"},C(s(r).getFormattedDate(s(t).dueDate)),43,et)]),o("div",st,[s(t).isCompleted?(p(),m(u,{key:0,onClick:e[3]||(e[3]=a=>S(!1)),icon:"fa-regular fa-square-check",title:"Mark as pending",class:"pointer has-text-primary"})):(p(),m(u,{key:1,onClick:e[4]||(e[4]=a=>S(!0)),icon:"fa-regular fa-square",title:"Mark as completed",class:"pointer has-text-primary"})),D(u,{onClick:e[5]||(e[5]=a=>c()),icon:"fa-solid fa-pen-to-square",title:"Edit",class:d(["pointer has-text-info",{"is-hidden":s(t).isCompleted}])},null,8,["class"]),D(u,{onClick:e[6]||(e[6]=a=>F()),icon:"fa-solid fa-trash-can",title:"Trash",class:"pointer has-text-danger"}),o("span",{class:d(["is-size-7-5 has-text-grey-lighter",{"is-hidden":s(t).isCompleted}])},"\u25CF",2),D(u,{onClick:e[7]||(e[7]=a=>L()),icon:"fa-solid fa-rotate",title:"Refresh to today",class:d(["pointer",{"is-hidden":s(t).isCompleted}])},null,8,["class"]),s(t).priority!==s(n).critical?(p(),m(u,{key:2,onClick:e[8]||(e[8]=a=>M()),icon:"fa-solid fa-hourglass-start",title:q(),class:d(["pointer",{"is-hidden":s(t).isCompleted}])},null,8,["title","class"])):b("",!0),o("span",{class:d(["is-size-7-5 has-text-grey-lighter",{"is-hidden":s(t).isCompleted}])},"\u25CF",2),s(t).priority!==s(n).critical?(p(),m(u,{key:3,onClick:e[9]||(e[9]=a=>V(s(t).priority===s(n).horizon?s(n).opportunity:s(n).critical)),icon:"fa-solid fa-up-long",title:B(),class:d(["pointer",{"is-hidden":s(t).isCompleted}])},null,8,["title","class"])):b("",!0),s(t).priority!==s(n).horizon?(p(),m(u,{key:4,onClick:e[10]||(e[10]=a=>V(s(t).priority===s(n).critical?s(n).opportunity:s(n).horizon)),icon:"fa-solid fa-down-long",title:I(),class:d(["pointer",{"is-hidden":s(t).isCompleted}])},null,8,["title","class"])):b("",!0)])],2))])}}},ft=A(mt,[["__scopeId","data-v-6d04cf08"]]);const vt={key:0},kt={class:"is-flex is-justify-content-space-between is-align-items-center"},yt={class:"title is-5 tasklist-title"},ht=J('<div class="columns ml-0 mr-0 is-variable is-2 is-size-7-5 is-uppercase has-text-weight-semibold has-text-grey" data-v-1e45e6da><p class="column is-5 pt-2" data-v-1e45e6da>Task</p><p class="column is-2 pt-2" data-v-1e45e6da>Start date</p><p class="column is-2 pt-2" data-v-1e45e6da>Due date</p><p class="column pt-2" data-v-1e45e6da>Actions</p></div>',1),Dt={__name:"TaskList",props:["tasks"],setup(T){const f=T,r=P(()=>{const t=f.tasks.length;return t?t===1?"1 task":`${t} tasks`:""});return(t,v)=>f.tasks.length?(p(),g("section",vt,[o("header",kt,[o("h3",yt,[j(t.$slots,"default",{},void 0,!0)]),o("p",null,C(s(r)),1)]),ht,(p(!0),g(W,null,G(f.tasks,k=>(p(),m(ft,{id:k.id,key:k.id},null,8,["id"]))),128))])):b("",!0)}},Ct=A(Dt,[["__scopeId","data-v-1e45e6da"]]);export{Ct as T};
