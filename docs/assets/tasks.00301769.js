import{p as d}from"./index.d2713152.js";import{s as u,l as c,a as l,b as h,i as k,u as a,d as f}from"./supabase.c5c58315.js";const m=d("auth",{state:()=>({isAuth:!1,userId:void 0,email:void 0}),actions:{async signup(){const t=await u(email,password);this.userId=t,this.email=email,this.isAuth=!0},async logIn(t,e){const s=await c(t,e);this.userId=s,this.email=t,this.isAuth=!0},async logOut(){this.userId=void 0,this.email=void 0,this.name=void 0,this.isAuth=!1,await l()}}}),o={critical:3,opportunity:2,horizon:1},w=d("tasks",{state:()=>({tasks:[]}),actions:{getTask(t){return this.tasks.find(e=>e.id===t)},getPriorityName(t){switch(t){case o.critical:return"Critical";case o.opportunity:return"Opportunity";default:return"Horizon"}},getFormattedDate(t){if(!t)return"";const e=new Date(t),s=e.toDateString(),i=new Date;if(i.setDate(i.getDate()-1),s===i.toDateString())return"Yesterday";const n=new Date;if(n.setDate(n.getDate()),s===n.toDateString())return"Today";const r=new Date;return r.setDate(r.getDate()+1),s===r.toDateString()?"Tomorrow":e.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"2-digit"})},async getAllTasks(){return this.tasks.length||(this.tasks=await h()),this.tasks},async createTask(t){const e=await k(t);return this.tasks.push(e),e},async modifyTask(t,e){await a(t.id,e);for(let s in e)t[s]=e[s],console.log(`modifyTask ${s} ${t[s]}`)},async removeTask(t){await f(t.id);const e=this.tasks.findIndex(s=>s.id===t.id);this.tasks.splice(e,1)},async archiveTask(t){const e={isArchived:!0};await a(t.id,e),t.isArchived=!0},async deferTask(t,e){const s={startDate:e,refreshedAt:new Date};await a(t.id,s)},async completeTask(t){const e={isCompleted:!0,completedAt:new Date};await a(t.id,e)}}});export{w as a,o as t,m as u};
